<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Wildlife Presence Using Trail Cameras</title>
  <meta name="description" content="This project utilizes trail camera footage obtained from 2019-2023 in Idaho, Oregon, and Washington for Snapshot USA. The goal is to become familiar with assessing wildlife presence using trail camera data. Methods used here will help with assessing wildlife data (i.e., trail camera, acoustic recording, point count survey) for my research regarding deadwood quantification using LiDAR and wildlife presence and activity near deadwood structures." />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="Wildlife Presence Using Trail Cameras" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This project utilizes trail camera footage obtained from 2019-2023 in Idaho, Oregon, and Washington for Snapshot USA. The goal is to become familiar with assessing wildlife presence using trail camera data. Methods used here will help with assessing wildlife data (i.e., trail camera, acoustic recording, point count survey) for my research regarding deadwood quantification using LiDAR and wildlife presence and activity near deadwood structures." />
  <meta name="github-repo" content="rrobenstein.github.io/wildlife_presence_trail_cams" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Wildlife Presence Using Trail Cameras" />
  
  <meta name="twitter:description" content="This project utilizes trail camera footage obtained from 2019-2023 in Idaho, Oregon, and Washington for Snapshot USA. The goal is to become familiar with assessing wildlife presence using trail camera data. Methods used here will help with assessing wildlife data (i.e., trail camera, acoustic recording, point count survey) for my research regarding deadwood quantification using LiDAR and wildlife presence and activity near deadwood structures." />
  

<meta name="author" content="Riley Robenstein" />


<meta name="date" content="2025-12-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="open_sans.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">Wildlife Presence Using Trail Cameras</h1>
<p class="author"><em>Riley Robenstein</em></p>
<p class="date"><em>2025-12-08</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#remote-sensing-and-wildlife" id="toc-remote-sensing-and-wildlife"><span class="toc-section-number">1</span> Remote sensing and wildlife</a>
<ul>
<li><a href="#snapshot-usa" id="toc-snapshot-usa"><span class="toc-section-number">1.1</span> SNAPSHOT USA</a></li>
<li><a href="#study-area" id="toc-study-area"><span class="toc-section-number">1.2</span> Study area</a></li>
<li><a href="#data-description" id="toc-data-description"><span class="toc-section-number">1.3</span> Data description</a></li>
<li><a href="#references" id="toc-references"><span class="toc-section-number">1.4</span> References</a></li>
</ul></li>
<li><a href="#database-creation-and-population" id="toc-database-creation-and-population"><span class="toc-section-number">2</span> Database creation and population</a>
<ul>
<li><a href="#load-packages-and-create-and-connect-to-database" id="toc-load-packages-and-create-and-connect-to-database"><span class="toc-section-number">2.1</span> Load packages and create and connect to database</a></li>
<li><a href="#project" id="toc-project"><span class="toc-section-number">2.2</span> <strong>PROJECT_NAME</strong> table</a>
<ul>
<li><a href="#create-project_name-table" id="toc-create-project_name-table"><span class="toc-section-number">2.2.1</span> Create <strong>project_name</strong> table</a></li>
<li><a href="#populate-project_name-table" id="toc-populate-project_name-table"><span class="toc-section-number">2.2.2</span> Populate <strong>project_name</strong> table</a></li>
</ul></li>
<li><a href="#array" id="toc-array"><span class="toc-section-number">2.3</span> <strong>CAMERA_ARRAY</strong> table</a>
<ul>
<li><a href="#create-camera_array-table" id="toc-create-camera_array-table"><span class="toc-section-number">2.3.1</span> Create <strong>camera_array</strong> table</a></li>
<li><a href="#populate-camera_array-table" id="toc-populate-camera_array-table"><span class="toc-section-number">2.3.2</span> Populate <strong>camera_array</strong> table</a></li>
</ul></li>
<li><a href="#site" id="toc-site"><span class="toc-section-number">2.4</span> <strong>SITE_NAME</strong> table</a>
<ul>
<li><a href="#create-site_name-table" id="toc-create-site_name-table"><span class="toc-section-number">2.4.1</span> Create <strong>site_name</strong> table</a></li>
<li><a href="#populate-site_name-table" id="toc-populate-site_name-table"><span class="toc-section-number">2.4.2</span> Populate <strong>site_name</strong> table</a></li>
</ul></li>
<li><a href="#deployment" id="toc-deployment"><span class="toc-section-number">2.5</span> <strong>DEPLOYMENT</strong> table</a>
<ul>
<li><a href="#create-deployment-table" id="toc-create-deployment-table"><span class="toc-section-number">2.5.1</span> Create <strong>deployment</strong> table</a></li>
<li><a href="#populate-deployment-table" id="toc-populate-deployment-table"><span class="toc-section-number">2.5.2</span> Populate <strong>deployment</strong> table</a></li>
</ul></li>
<li><a href="#sequence" id="toc-sequence"><span class="toc-section-number">2.6</span> <strong>SEQUENCE</strong> table</a>
<ul>
<li><a href="#create-sequence-table" id="toc-create-sequence-table"><span class="toc-section-number">2.6.1</span> Create <strong>sequence</strong> table</a></li>
<li><a href="#populate-sequence-table" id="toc-populate-sequence-table"><span class="toc-section-number">2.6.2</span> Populate <strong>sequence</strong> table</a></li>
</ul></li>
<li><a href="#detection-table" id="toc-detection-table"><span class="toc-section-number">2.7</span> <strong>DETECTION</strong> table</a>
<ul>
<li><a href="#create-detection-table" id="toc-create-detection-table"><span class="toc-section-number">2.7.1</span> Create <strong>detection</strong> table</a></li>
<li><a href="#clean-detection-table" id="toc-clean-detection-table"><span class="toc-section-number">2.7.2</span> Clean <strong>detection</strong> table</a></li>
<li><a href="#populate-detection-table" id="toc-populate-detection-table"><span class="toc-section-number">2.7.3</span> Populate <strong>detection</strong> table</a></li>
</ul></li>
<li><a href="#check-database" id="toc-check-database"><span class="toc-section-number">2.8</span> Check database</a></li>
</ul></li>
<li><a href="#data-exploration" id="toc-data-exploration"><span class="toc-section-number">3</span> Data exploration</a>
<ul>
<li><a href="#load-package-database-and-tables" id="toc-load-package-database-and-tables"><span class="toc-section-number">3.1</span> Load package, database and tables</a></li>
<li><a href="#exploratory-summaries" id="toc-exploratory-summaries"><span class="toc-section-number">3.2</span> Exploratory summaries</a>
<ul>
<li><a href="#deployments-per-year" id="toc-deployments-per-year"><span class="toc-section-number">3.2.1</span> Deployments per year</a></li>
<li><a href="#arrays-with-8-cameras" id="toc-arrays-with-8-cameras"><span class="toc-section-number">3.2.2</span> Arrays with &gt; 8 cameras</a></li>
<li><a href="#sites-reused" id="toc-sites-reused"><span class="toc-section-number">3.2.3</span> Sites reused</a></li>
</ul></li>
<li><a href="#number-of-species" id="toc-number-of-species"><span class="toc-section-number">3.3</span> Number of species</a>
<ul>
<li><a href="#by-habitat" id="toc-by-habitat"><span class="toc-section-number">3.3.1</span> By habitat</a></li>
<li><a href="#by-feature-type" id="toc-by-feature-type"><span class="toc-section-number">3.3.2</span> By feature type</a></li>
<li><a href="#by-habitat-and-feature-type" id="toc-by-habitat-and-feature-type"><span class="toc-section-number">3.3.3</span> By habitat and feature type</a></li>
</ul></li>
<li><a href="#number-of-detections" id="toc-number-of-detections"><span class="toc-section-number">3.4</span> Number of detections</a>
<ul>
<li><a href="#by-year" id="toc-by-year"><span class="toc-section-number">3.4.1</span> By year</a></li>
<li><a href="#by-month" id="toc-by-month"><span class="toc-section-number">3.4.2</span> By month</a></li>
<li><a href="#by-site" id="toc-by-site"><span class="toc-section-number">3.4.3</span> By site</a></li>
<li><a href="#by-site-and-month" id="toc-by-site-and-month"><span class="toc-section-number">3.4.4</span> By site and month</a></li>
</ul></li>
</ul></li>
<li><a href="#data-visualization" id="toc-data-visualization"><span class="toc-section-number">4</span> Data visualization</a>
<ul>
<li><a href="#species-in-september-and-october" id="toc-species-in-september-and-october"><span class="toc-section-number">4.1</span> Species in September and October</a>
<ul>
<li><a href="#species-detected-100-times" id="toc-species-detected-100-times"><span class="toc-section-number">4.1.1</span> Species detected &gt; 100 times</a></li>
<li><a href="#carnivora-order-detections" id="toc-carnivora-order-detections"><span class="toc-section-number">4.1.2</span> Carnivora order detections</a></li>
</ul></li>
<li><a href="#detections-across-orders" id="toc-detections-across-orders"><span class="toc-section-number">4.2</span> Detections across orders</a></li>
<li><a href="#detections-over-time" id="toc-detections-over-time"><span class="toc-section-number">4.3</span> Detections over time</a>
<ul>
<li><a href="#wildlife-detections-over-time" id="toc-wildlife-detections-over-time"><span class="toc-section-number">4.3.1</span> Wildlife detections over time</a></li>
<li><a href="#wildlife-and-human-domestic-detections-over-time" id="toc-wildlife-and-human-domestic-detections-over-time"><span class="toc-section-number">4.3.2</span> Wildlife and human-domestic detections over time</a></li>
</ul></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Wildlife Presence Using Trail Cameras</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="remote-sensing-and-wildlife" class="section level1 hasAnchor" number="1">
<h1 class="hasAnchor"><span class="header-section-number">1</span> Remote sensing and wildlife<a href="#remote-sensing-and-wildlife" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Use of remote sensing in wildlife research has become increasingly
prevalent, particularly with trail cameras. Trail cameras can provide
information about wildlife presence and absence when human observations
are unavailable or may disturb wildlife activity and presence. Continued
collection of data with trail cameras can provide spatial and temporal
trends of larger wildlife. The SNAPSHOT USA project contains several
years of camera trap data across the US available for public use
<span class="citation">(<a href="#ref-rooney2025b">Rooney et al. 2025<em>b</em></a>)</span>. Data were collected using un-baited cameras and
identified through <a href="https://app.wildlifeinsights.org/initiatives/2000156/Snapshot-USA">Wildlife
Insights</a>.
The objective of this project is to become familiar with trail camera
data to assess wildlife presence and activity. This will ultimately help
in future data collection using trail cameras and acoustic recording
units deployed and point count surveys conducted in the University of
Idaho Experimental Forest to assess how deadwood structures may
influence wildlife presence and activity. This file assists in building
a database and cleaning and visualizing trail camera data.</p>
<div id="snapshot-usa" class="section level2 hasAnchor" number="1.1">
<h2 class="hasAnchor"><span class="header-section-number">1.1</span> SNAPSHOT USA<a href="#snapshot-usa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>SNAPSHOT USA is a national project where camera trap surveys are
conducted across all 50 US states annually from September-October to
estimate wildlife abundance and distributions <span class="citation">(<a href="#ref-rooney2025a">Rooney et al. 2025<em>a</em></a>)</span>. This
project primarily focuses on mammalian species, with large birds also
included. SNAPSHOT USA’s protocol provides a solid base for community
science, and various organizations across the country collaborate to
produce these spatial and temporal wildlife data. Some contributors have
provided data outside the standard collection period, so the 2019-2023
data span from August 1-December 29 <span class="citation">(<a href="#ref-rooney2025a">Rooney et al. 2025<em>a</em></a>)</span>. Each collaborator is
required to deploy a camera array made up of a minimum of eight
un-baited cameras. The SNAPSHOT USA protocol requires at least 400
camera trap-nights between September and October per year for each
camera array <span class="citation">(<a href="#ref-rooney2025a">Rooney et al. 2025<em>a</em></a>)</span>.</p>
</div>
<div id="study-area" class="section level2 hasAnchor" number="1.2">
<h2 class="hasAnchor"><span class="header-section-number">1.2</span> Study area<a href="#study-area" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>My focal area included a total of 15 trail camera sites in Idaho,
Washington, and Oregon (Figure 1).</p>
<div class="float">
<img src="../../documents/study_area.jpg" alt="Figure 1. Camera array locations and Bailey’s ecoregions of the US from 2019-2023 (Rooney 2024). Darker points represent locations that fall within Idaho, Washington and Oregon and size correlates to the number of years surveyed. Colored polygons represent different ecoregions." />
<div class="figcaption">Figure 1. Camera array locations and Bailey’s ecoregions of the US
from 2019-2023 <span class="citation">(<a href="#ref-rooney2024">Rooney 2024</a>)</span>. Darker points represent locations that fall within
Idaho, Washington and Oregon and size correlates to the number of years
surveyed. Colored polygons represent different
ecoregions.</div>
</div>
</div>
<div id="data-description" class="section level2 hasAnchor" number="1.3">
<h2 class="hasAnchor"><span class="header-section-number">1.3</span> Data description<a href="#data-description" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I subsetted these data to only include cameras deployed in Idaho,
Washington and Oregon. Data consisted of camera arrays, camera
locations, general habitat characteristics, deployment periods, image
sequences, and taxonomic information across various levels for species
identification <span class="citation">(<a href="#ref-rooney2025b">Rooney et al. 2025<em>b</em></a>)</span>. Further information regarding camera
array locations and ecoregions were added for camera arrays
<span class="citation">(<a href="#ref-rooney2024">Rooney 2024</a>)</span>.</p>
</div>
<div id="references" class="section level2 hasAnchor" number="1.4">
<h2 class="hasAnchor"><span class="header-section-number">1.4</span> References<a href="#references" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-rooney2024" class="csl-entry">
Rooney, B. 2024. Years of data collected by camera arrays. &lt;<a href="https://public.tableau.com/app/profile/brigit.rooney/viz/YearsofDataCollectedbyCameraArrays/Sheet6">https://public.tableau.com/app/profile/brigit.rooney/viz/YearsofDataCollectedbyCameraArrays/Sheet6</a>&gt;.
</div>
<div id="ref-rooney2025a" class="csl-entry">
Rooney, B., R. Kays, M. V. Cove, A. Jensen, B. R. Goldstein, C. Pate, P. Castiblanco, M. E. Abell, J. Adley, B. Agenbroad, et al. 2025<em>a</em>. SNAPSHOT USA 2019-2023: The first five years of data from a coordinated camera trap survey of the united states. Global Ecology and Biogeography 34:e13941. &lt;<a href="https://onlinelibrary.wiley.com/doi/full/10.1111/geb.13941">https://onlinelibrary.wiley.com/doi/full/10.1111/geb.13941</a>&gt;.
</div>
<div id="ref-rooney2025b" class="csl-entry">
Rooney, B., W. McShea, R. Kays, and M. Cove. 2025<em>b</em>. SNAPSHOT USA 2019-2023: the first five years of data from a coordinated camera trap survey of the United States [Dataset]. Dryad. &lt;<a href="https://datadryad.org/dataset/doi:10.5061/dryad.k0p2ngfhn">https://datadryad.org/dataset/doi:10.5061/dryad.k0p2ngfhn</a>&gt;.
</div>
</div>
<!--chapter:end:index.Rmd-->
</div>
</div>
<div id="database-creation-and-population" class="section level1 hasAnchor" number="2">
<h1 class="hasAnchor"><span class="header-section-number">2</span> Database creation and population<a href="#database-creation-and-population" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Trail camera data were distributed across six <code>.csv</code> files in the
<strong>processed_data</strong> folder to optimize storage and data manipulation. I
created a relational database with R and SQL to easily navigate these
data (Figure 2). Note that the header of each box corresponds to the name of each table. The database can be reproduced with the code in sections <strong>2.1-2.8</strong>.</p>
<div class="float">
<img src="../../documents/db_structure_ssusa.jpg" alt="Figure 2. Entity relationship diagram of relational database structure." />
<div class="figcaption">Figure 2. Entity relationship diagram of relational database
structure.</div>
</div>
<div id="load-packages-and-create-and-connect-to-database" class="section level2 hasAnchor" number="2.1">
<h2 class="hasAnchor"><span class="header-section-number">2.1</span> Load packages and create and connect to database<a href="#load-packages-and-create-and-connect-to-database" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Load the packages <code>DBI</code> and <code>RSQLite</code> required to connect R and SQLite.
Use <code>install.packages()</code> if the packages are not installed.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span></code></pre></div>
<p>Connect to the database file. A database file will be created if the
code has not previously been executed.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>wlf_cam_db <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(),</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>                       <span class="st">&quot;../../database/wlf_cam.db&quot;</span>)</span></code></pre></div>
</div>
<div id="project" class="section level2 hasAnchor" number="2.2">
<h2 class="hasAnchor"><span class="header-section-number">2.2</span> <strong>PROJECT_NAME</strong> table<a href="#project" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>project_name</strong> table includes the following variables: project_id
(<strong>primary key</strong>), project_name, and year, where project_id is a unique
identifier for each unique project by year, project name is the
respective project name, and year is the year data were captured.</p>
<div id="create-project_name-table" class="section level3 hasAnchor" number="2.2.1">
<h3 class="hasAnchor"><span class="header-section-number">2.2.1</span> Create <strong>project_name</strong> table<a href="#create-project_name-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE project_name (</span></span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="st">          project_id varchar(10) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a><span class="st">          project_name varchar(35),</span></span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a><span class="st">          year numeric(4) CHECK (year IN </span></span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a><span class="st">                                          (&#39;2019&#39;,</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a><span class="st">                                          &#39;2020&#39;,</span></span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="st">                                          &#39;2021&#39;,</span></span>
<span id="cb3-9"><a href="#cb3-9" tabindex="-1"></a><span class="st">                                          &#39;2022&#39;,</span></span>
<span id="cb3-10"><a href="#cb3-10" tabindex="-1"></a><span class="st">                                          &#39;2023&#39;))</span></span>
<span id="cb3-11"><a href="#cb3-11" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="populate-project_name-table" class="section level3 hasAnchor" number="2.2.2">
<h3 class="hasAnchor"><span class="header-section-number">2.2.2</span> Populate <strong>project_name</strong> table<a href="#populate-project_name-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># Read in project_name.csv file</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>project_name_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/project_name.csv&quot;</span>)</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="fu">colnames</span>(project_name_csv)</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="co"># Get database field names </span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;project_name&quot;</span>)</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;project_name&quot;</span>,</span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a>             <span class="at">value =</span> project_name_csv,</span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="array" class="section level2 hasAnchor" number="2.3">
<h2 class="hasAnchor"><span class="header-section-number">2.3</span> <strong>CAMERA_ARRAY</strong> table<a href="#array" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>camera_array</strong> table includes the following variables: array_name
(<strong>primary key</strong>), state, years_surveyed, ecoregion, array_lat, and
array_long, where array_name is a unique identifier for each camera trap
array, state is the US state where the array was located, years_surveyed
is the number of years an array has image sequence data from, ecoregion
is based on Bailey’s ecoregions (Bailey 2016 as cited in Rooney et al.
2025) and array_lat and array_long are the approximate latitude and
longitude coordinates (decimal degrees WGS 84) for the respective array
array.</p>
<div id="create-camera_array-table" class="section level3 hasAnchor" number="2.3.1">
<h3 class="hasAnchor"><span class="header-section-number">2.3.1</span> Create <strong>camera_array</strong> table<a href="#create-camera_array-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE camera_array (</span></span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a><span class="st">          array_name varchar(20) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a><span class="st">          state varchar(2),</span></span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a><span class="st">          years_surveyed numeric(1),</span></span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a><span class="st">          ecoregion varchar(20),</span></span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a><span class="st">          array_lat numeric(10, 10),</span></span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a><span class="st">          array_long numeric(10, 10)</span></span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="populate-camera_array-table" class="section level3 hasAnchor" number="2.3.2">
<h3 class="hasAnchor"><span class="header-section-number">2.3.2</span> Populate <strong>camera_array</strong> table<a href="#populate-camera_array-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co"># Read in camera_array.csv file</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>camera_array_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/camera_array.csv&quot;</span>)</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a><span class="fu">colnames</span>(camera_array_csv)</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># Get database field names</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;camera_array&quot;</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;camera_array&quot;</span>,</span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>             <span class="at">value =</span> camera_array_csv,</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="site" class="section level2 hasAnchor" number="2.4">
<h2 class="hasAnchor"><span class="header-section-number">2.4</span> <strong>SITE_NAME</strong> table<a href="#site" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>site_name</strong> table includes the following variables: site_id
(<strong>primary key</strong>), array_name (<em>foreign key</em>), and development_level,
where site_id is a unique identifier for each site, array_name
corresponds to the array_name in <a href="#array">camera_array</a>, and
development_level is classified as wild, rural, suburban, or urban.</p>
<div id="create-site_name-table" class="section level3 hasAnchor" number="2.4.1">
<h3 class="hasAnchor"><span class="header-section-number">2.4.1</span> Create <strong>site_name</strong> table<a href="#create-site_name-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE site_name (</span></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="st">          site_id varchar(50) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="st">          array_name  varchar(50),</span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="st">          development_level varchar(10) CHECK (development_level IN </span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="st">                                                                (&#39;Wild&#39;,</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="st">                                                                &#39;Rural&#39;,</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a><span class="st">                                                                &#39;Urban&#39;,</span></span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a><span class="st">                                                                &#39;Suburban&#39;)),</span></span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a><span class="st">          FOREIGN KEY (array_name) REFERENCES camera_array(array_name)</span></span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="populate-site_name-table" class="section level3 hasAnchor" number="2.4.2">
<h3 class="hasAnchor"><span class="header-section-number">2.4.2</span> Populate <strong>site_name</strong> table<a href="#populate-site_name-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># Read in site_name.csv file</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>site_name_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/site_name.csv&quot;</span>)</span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a><span class="fu">colnames</span>(site_name_csv)</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a><span class="co"># Get database field names </span></span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;site_name&quot;</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;site_name&quot;</span>,</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>             <span class="at">value =</span> site_name_csv,</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="deployment" class="section level2 hasAnchor" number="2.5">
<h2 class="hasAnchor"><span class="header-section-number">2.5</span> <strong>DEPLOYMENT</strong> table<a href="#deployment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>deployment</strong> table includes the following variables: deployment_id
(<strong>primary key</strong>), site_id (<em>foreign key</em>), project_id (<em>foreign key</em>).
start_date, end_date, survey_nights, latitude, longitude, habitat, and
feature type, where deployment_id is a unique identifier for each camera
deployment, site_id corresponds to the site_id in <a href="#site">site_name</a>,
project_id corresponds to the project_id in <a href="#project">project_name</a>,
start_date is the date (<em>YYYY-MM-DD</em>) when the camera was deployed,
end_date is the date (<em>YYYY-MM-DD</em>) when the camera was retrieved,
survey_nights is number of nights the camera was at the site, latitude
and longitude are geographic coordinates (decimal degrees WGS 84)
between 21.3558 to 59.4526 and -157.7496 to -68.6116, respectively,
habitat is classified as forest, grassland, or anthropogenic, and
feature type indicates potential features at the camera’s deployment
site.</p>
<div id="create-deployment-table" class="section level3 hasAnchor" number="2.5.1">
<h3 class="hasAnchor"><span class="header-section-number">2.5.1</span> Create <strong>deployment</strong> table<a href="#create-deployment-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE deployment (</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="st">          deployment_id varchar(60) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="st">          site_id varchar(50),</span></span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a><span class="st">          project_id varchar(10),</span></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="st">          start_date text,</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a><span class="st">          end_date text,</span></span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a><span class="st">          survey_nights numeric (3),</span></span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a><span class="st">          latitude numeric(10, 10),</span></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="st">          longitude numeric(10, 10),</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a><span class="st">          habitat varchar(15),</span></span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a><span class="st">          feature_type varchar(15),</span></span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a><span class="st">          FOREIGN KEY (site_id) REFERENCES site_name(site_id)</span></span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a><span class="st">          FOREIGN KEY (project_id) REFERENCES project_name(project_id)</span></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="populate-deployment-table" class="section level3 hasAnchor" number="2.5.2">
<h3 class="hasAnchor"><span class="header-section-number">2.5.2</span> Populate <strong>deployment</strong> table<a href="#populate-deployment-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co"># Read in deployment.csv file</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a>deployment_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/deployment.csv&quot;</span>)</span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="fu">colnames</span>(deployment_csv)</span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># Get database field names </span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;deployment&quot;</span>)</span></code></pre></div>
<p>Before populating the table, note the discrepancy in names of variables.</p>
<pre><code>##  [1] &quot;deployment_id&quot; &quot;site_id&quot;       &quot;project_id&quot;    &quot;lat&quot;          
##  [5] &quot;long&quot;          &quot;start&quot;         &quot;end&quot;           &quot;survey_nights&quot;
##  [9] &quot;habitat&quot;       &quot;feature_type&quot;</code></pre>
<pre><code>##  [1] &quot;deployment_id&quot; &quot;site_id&quot;       &quot;project_id&quot;    &quot;start_date&quot;   
##  [5] &quot;end_date&quot;      &quot;survey_nights&quot; &quot;latitude&quot;      &quot;longitude&quot;    
##  [9] &quot;habitat&quot;       &quot;feature_type&quot;</code></pre>
<p>Edit the <code>.csv</code> column names to fit those of the database first.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co"># Edit .csv column names</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a><span class="fu">colnames</span>(deployment_csv) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;deployment_id&quot;</span>, <span class="st">&quot;site_id&quot;</span>,</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>                              <span class="st">&quot;project_id&quot;</span>, <span class="st">&quot;latitude&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" tabindex="-1"></a>                              <span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;start_date&quot;</span>,</span>
<span id="cb13-5"><a href="#cb13-5" tabindex="-1"></a>                              <span class="st">&quot;end_date&quot;</span>, <span class="st">&quot;survey_nights&quot;</span>,</span>
<span id="cb13-6"><a href="#cb13-6" tabindex="-1"></a>                              <span class="st">&quot;habitat&quot;</span>, <span class="st">&quot;feature_type&quot;</span>)</span>
<span id="cb13-7"><a href="#cb13-7" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" tabindex="-1"></a><span class="co"># Check .csv column names again</span></span>
<span id="cb13-9"><a href="#cb13-9" tabindex="-1"></a><span class="fu">colnames</span>(deployment_csv)</span></code></pre></div>
<pre><code>##  [1] &quot;deployment_id&quot; &quot;site_id&quot;       &quot;project_id&quot;    &quot;latitude&quot;     
##  [5] &quot;longitude&quot;     &quot;start_date&quot;    &quot;end_date&quot;      &quot;survey_nights&quot;
##  [9] &quot;habitat&quot;       &quot;feature_type&quot;</code></pre>
<p>Now that the column names match, populate the deployment table.</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;deployment&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>             <span class="at">value =</span> deployment_csv,</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="sequence" class="section level2 hasAnchor" number="2.6">
<h2 class="hasAnchor"><span class="header-section-number">2.6</span> <strong>SEQUENCE</strong> table<a href="#sequence" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>sequence</strong> table includes the following variables: sequence_id
(<strong>primary key</strong>), deployment_id (<em>foreign key</em>), start_time, and
end_time, where sequence_id is a unique identifier for each photo
sequence captured within one minute of a camera trigger, deployment_id
corresponds to the deployment_id in <a href="#deployment">deployment</a>,
start_time is the beginning of the one-minute photo sequence, and
end_time is the end of the one-minute photo sequence.</p>
<div id="create-sequence-table" class="section level3 hasAnchor" number="2.6.1">
<h3 class="hasAnchor"><span class="header-section-number">2.6.1</span> Create <strong>sequence</strong> table<a href="#create-sequence-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE sequence (</span></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a><span class="st">          sequence_id varchar(15) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="st">          deployment_id varchar(60),</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a><span class="st">          start_time text,</span></span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a><span class="st">          end_time text,</span></span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a><span class="st">          FOREIGN KEY (deployment_id) REFERENCES deployment(deployment_id)</span></span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="populate-sequence-table" class="section level3 hasAnchor" number="2.6.2">
<h3 class="hasAnchor"><span class="header-section-number">2.6.2</span> Populate <strong>sequence</strong> table<a href="#populate-sequence-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co"># Read in sequence.csv file</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a>sequence_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/sequence.csv&quot;</span>)</span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a><span class="fu">colnames</span>(sequence_csv)</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a><span class="co"># Get database field names </span></span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;sequence&quot;</span>)</span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;sequence&quot;</span>,</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a>             <span class="at">value =</span> sequence_csv,</span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="detection-table" class="section level2 hasAnchor" number="2.7">
<h2 class="hasAnchor"><span class="header-section-number">2.7</span> <strong>DETECTION</strong> table<a href="#detection-table" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <strong>detection</strong> table includes the following variables: detection_id
(<strong>primary key</strong>), sequence_id (<em>foreign key</em>), class, order, family,
genus, species, common_name, age, sex, and group_number, where
detection_id is a unique identifier for each wildlife detection,
sequence_id corresponds to the sequence_id in <a href="#sequence">sequence</a>,
class is the taxonomic class identified for the wildlife detection,
order is the taxonomic order identified for the wildlife detection,
family is the taxonomic family identified for the wildlife detection,
genus is the taxonomic genus identified for the wildlife detection,
species is the taxonomic species identified for the wildlife detection,
common_name is the common name identified for the wildlife detection,
age is classified as juvenile or adult, sex is classified as male or
female, and group_number is the number of individuals in the image
sequence with that respective taxonomic identification.</p>
<div id="create-detection-table" class="section level3 hasAnchor" number="2.7.1">
<h3 class="hasAnchor"><span class="header-section-number">2.7.1</span> Create <strong>detection</strong> table<a href="#create-detection-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Create the table in SQLite.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="fu">dbExecute</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a>          <span class="at">statement =</span> <span class="st">&quot;CREATE TABLE detection (</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="st">          detection_id varchar(15) PRIMARY KEY NOT NULL UNIQUE,</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="st">          sequence_id varchar(15),</span></span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a><span class="st">          class varchar(15),</span></span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a><span class="st">          &#39;order&#39; varchar(20),</span></span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a><span class="st">          family varchar(20),</span></span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a><span class="st">          genus varchar (15),</span></span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a><span class="st">          species varchar(15),</span></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="st">          common_name varchar(30),</span></span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a><span class="st">          age varchar(10),</span></span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a><span class="st">          sex varchar(10),</span></span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a><span class="st">          group_number numeric(2),</span></span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a><span class="st">          FOREIGN KEY (sequence_id) REFERENCES sequence(sequence_id)</span></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="st">          );&quot;</span>)</span></code></pre></div>
</div>
<div id="clean-detection-table" class="section level3 hasAnchor" number="2.7.2">
<h3 class="hasAnchor"><span class="header-section-number">2.7.2</span> Clean <strong>detection</strong> table<a href="#clean-detection-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The detection <code>.csv</code> file has missing values and formatting is
inconsistent. To ensure they are compatible with <code>SQLite</code> and <code>R</code>, load
the <code>.csv</code> file and convert all missing values to ‘NA’. Make formatting
consistent for the variables <em>age</em> and <em>sex</em>.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co"># Read in detection.csv file</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a>detection_csv <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;../../processed_data/detection.csv&quot;</span>)</span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="co"># Convert &#39; &#39; or &#39;Unknown&#39; values to blank (&#39;&#39;)</span></span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>detection_csv[detection_csv <span class="sc">==</span> <span class="st">&quot; &quot;</span> <span class="sc">|</span> detection_csv <span class="sc">==</span> <span class="st">&quot;Unknown&quot;</span> <span class="sc">|</span> detection_csv <span class="sc">==</span> <span class="st">&quot;unknown&quot;</span>] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a><span class="co"># Make formatting consistent</span></span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>detection_csv<span class="sc">$</span>age[detection_csv<span class="sc">$</span>age <span class="sc">==</span> <span class="st">&quot;adult&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Adult&quot;</span></span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a>detection_csv<span class="sc">$</span>age[detection_csv<span class="sc">$</span>age <span class="sc">==</span> <span class="st">&quot;juvenile&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Juvenile&quot;</span></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>detection_csv<span class="sc">$</span>sex[detection_csv<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;male&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Male&quot;</span></span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>detection_csv<span class="sc">$</span>sex[detection_csv<span class="sc">$</span>sex <span class="sc">==</span> <span class="st">&quot;female&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;Female&quot;</span></span></code></pre></div>
</div>
<div id="populate-detection-table" class="section level3 hasAnchor" number="2.7.3">
<h3 class="hasAnchor"><span class="header-section-number">2.7.3</span> Populate <strong>detection</strong> table<a href="#populate-detection-table" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Populate this database table with the <code>.csv</code> file after checking the
column names correspond.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co"># Get .csv column names</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="fu">colnames</span>(detection_csv)</span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co"># Get database field names </span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a><span class="fu">dbListFields</span>(wlf_cam_db, <span class="st">&quot;detection&quot;</span>)</span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a></span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a><span class="co"># Append .csv into SQLite table</span></span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a><span class="fu">dbWriteTable</span>(<span class="at">conn =</span> wlf_cam_db,</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>             <span class="at">name =</span> <span class="st">&quot;detection&quot;</span>,</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>             <span class="at">value =</span> detection_csv,</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a>             <span class="at">append =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
</div>
</div>
<div id="check-database" class="section level2 hasAnchor" number="2.8">
<h2 class="hasAnchor"><span class="header-section-number">2.8</span> Check database<a href="#check-database" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Run the following code to ensure the data were loaded into the tables
properly.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co"># List table names</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="fu">dbListTables</span>(wlf_cam_db)</span></code></pre></div>
<pre><code>## [1] &quot;camera_array&quot; &quot;deployment&quot;   &quot;detection&quot;    &quot;project_name&quot; &quot;sequence&quot;    
## [6] &quot;site_name&quot;</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co"># project_name table</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM project_name</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##   project_id      project_name year
## 1    ssusa19 Snapshot USA 2019 2019
## 2    ssusa20 Snapshot USA 2020 2020
## 3    ssusa21 Snapshot USA 2021 2021
## 4    ssusa22 Snapshot USA 2022 2022
## 5    ssusa23 Snapshot USA 2023 2023</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># camera_array table</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM camera_array</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##       array_name state years_surveyed        ecoregion array_lat array_long
## 1         Galena    ID              1 Temperate Steppe     43.86    -114.65
## 2         Hailey    ID              1 Temperate Steppe     43.56    -114.47
## 3      SunValley    ID              1 Temperate Steppe     43.70    -114.22
## 4 OregonStateUni    OR              5           Marine     44.42    -123.46
## 5      Forrester    OR              2 Temperate Desert     45.29    -118.56</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># site_name table</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM site_name</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##                            site_id array_name development_level
## 1 OR_Forest_Forrester_21_loc_01dup  Forrester              Wild
## 2    OR_Forest_Forrester_21_loc_02  Forrester              Wild
## 3    OR_Forest_Forrester_21_loc_03  Forrester              Wild
## 4    OR_Forest_Forrester_21_loc_04  Forrester              Wild
## 5    OR_Forest_Forrester_21_loc_05  Forrester              Wild</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="co"># deployment table</span></span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM deployment</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##                   deployment_id                          site_id
## 1 OR_Forest_Forrester_21_dep_01 OR_Forest_Forrester_21_loc_01dup
## 2 OR_Forest_Forrester_21_dep_02    OR_Forest_Forrester_21_loc_02
## 3 OR_Forest_Forrester_21_dep_03    OR_Forest_Forrester_21_loc_03
## 4 OR_Forest_Forrester_21_dep_04    OR_Forest_Forrester_21_loc_04
## 5 OR_Forest_Forrester_21_dep_05    OR_Forest_Forrester_21_loc_05
##          project_id start_date   end_date survey_nights latitude longitude
## 1 Snapshot USA 2021   9/1/2021 11/24/2021            84 45.30501 -118.6071
## 2 Snapshot USA 2021   9/1/2021 11/24/2021            84 45.30404 -118.5949
## 3 Snapshot USA 2021   9/1/2021  11/5/2021            65 45.30509 -118.5822
## 4 Snapshot USA 2021   9/1/2021  11/5/2021            65 45.30507 -118.5695
## 5 Snapshot USA 2021   9/1/2021 10/28/2021            57 45.30468 -118.5566
##   habitat feature_type
## 1  Forest   Trail game
## 2  Forest   Trail game
## 3  Forest   Trail game
## 4  Forest   Trail game
## 5  Forest    Road dirt</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co"># sequence table</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM sequence</span></span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##   sequence_id        deployment_id      start_time        end_time
## 1    sewa0001 SEWA_N01_DSPSS1_SP22 9/12/2022 17:57 9/12/2022 17:59
## 2    sewa0002 SEWA_N01_DSPSS1_SP22  9/14/2022 7:59  9/14/2022 8:01
## 3    sewa0003 SEWA_N01_DSPSS1_SP22  9/14/2022 8:02  9/14/2022 8:02
## 4    sewa0004 SEWA_N01_DSPSS1_SP22  9/15/2022 5:17  9/15/2022 5:17
## 5    sewa0005 SEWA_N01_DSPSS1_SP22  9/16/2022 1:32  9/16/2022 1:33</code></pre>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># detection table</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM detection</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="st">                        LIMIT 5;&quot;</span>)</span></code></pre></div>
<pre><code>##   detection_id sequence_id    class    order    family genus species
## 1      cd00001     7446823 Mammalia Primates Hominidae  Homo sapiens
## 2      cd00002     7446946 Mammalia Primates Hominidae  Homo sapiens
## 3      cd00003     7447030 Mammalia Primates Hominidae  Homo sapiens
## 4      cd00004     7447116 Mammalia Primates Hominidae  Homo sapiens
## 5      cd00005     7447141 Mammalia Primates Hominidae  Homo sapiens
##            common_name  age  sex group_number
## 1 Human-Camera Trapper &lt;NA&gt; &lt;NA&gt;            1
## 2 Human-Camera Trapper &lt;NA&gt; &lt;NA&gt;            1
## 3                Human &lt;NA&gt; &lt;NA&gt;            1
## 4                Human &lt;NA&gt; &lt;NA&gt;            1
## 5                Human &lt;NA&gt; &lt;NA&gt;            1</code></pre>
<!--chapter:end:01-database_creation_population.Rmd-->
</div>
</div>
<div id="data-exploration" class="section level1 hasAnchor" number="3">
<h1 class="hasAnchor"><span class="header-section-number">3</span> Data exploration<a href="#data-exploration" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Now that the database is created and loaded, we can explore and
familiarize ourselves with trail camera data.</p>
<div id="load-package-database-and-tables" class="section level2 hasAnchor" number="3.1">
<h2 class="hasAnchor"><span class="header-section-number">3.1</span> Load package, database and tables<a href="#load-package-database-and-tables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Load the <code>tidyverse</code> package to help with data exploration, along with the previous packages. Load the database and
tables and assign them each to an object.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb35-2"><a href="#cb35-2" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb35-3"><a href="#cb35-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb35-4"><a href="#cb35-4" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" tabindex="-1"></a>wlf_cam_db <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(),</span>
<span id="cb35-6"><a href="#cb35-6" tabindex="-1"></a>                       <span class="st">&quot;../../database/wlf_cam.db&quot;</span>)</span>
<span id="cb35-7"><a href="#cb35-7" tabindex="-1"></a></span>
<span id="cb35-8"><a href="#cb35-8" tabindex="-1"></a>project <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM project_name;&quot;</span>)</span>
<span id="cb35-9"><a href="#cb35-9" tabindex="-1"></a>array <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM camera_array;&quot;</span>)</span>
<span id="cb35-10"><a href="#cb35-10" tabindex="-1"></a>site <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM site_name;&quot;</span>)</span>
<span id="cb35-11"><a href="#cb35-11" tabindex="-1"></a>deployment <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM deployment;&quot;</span>)</span>
<span id="cb35-12"><a href="#cb35-12" tabindex="-1"></a>sequence <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM sequence;&quot;</span>)</span>
<span id="cb35-13"><a href="#cb35-13" tabindex="-1"></a>detection <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM detection;&quot;</span>)</span></code></pre></div>
</div>
<div id="exploratory-summaries" class="section level2 hasAnchor" number="3.2">
<h2 class="hasAnchor"><span class="header-section-number">3.2</span> Exploratory summaries<a href="#exploratory-summaries" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Before diving into wildlife presence/absence and population trends,
explore the following summary information about the trail cameras below.</p>
<div id="deployments-per-year" class="section level3 hasAnchor" number="3.2.1">
<h3 class="hasAnchor"><span class="header-section-number">3.2.1</span> Deployments per year<a href="#deployments-per-year" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many cameras were deployed each year.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a>n_cam <span class="ot">&lt;-</span> deployment <span class="sc">%&gt;%</span> </span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">mdy</span>(start_date))) <span class="sc">%&gt;%</span> <span class="co"># acquire year from deployment date</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="co"># group deployments by year</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a>  tally <span class="co"># calculate number of cameras deployed per year</span></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a>n_cam</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##    year     n
##   &lt;dbl&gt; &lt;int&gt;
## 1  2019    65
## 2  2020    61
## 3  2021    67
## 4  2022   116
## 5  2023    93</code></pre>
</div>
<div id="arrays-with-8-cameras" class="section level3 hasAnchor" number="3.2.2">
<h3 class="hasAnchor"><span class="header-section-number">3.2.2</span> Arrays with &gt; 8 cameras<a href="#arrays-with-8-cameras" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many camera arrays had more than eight cameras
deployed per survey period.</p>
<p>Note that there is no foreign key directly connecting the array and
deployment tables. We will need the site table to connect these these
two tables.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a>n_array <span class="ot">&lt;-</span> array <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a>  <span class="fu">left_join</span>(site, <span class="at">by =</span> <span class="st">&quot;array_name&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join site table to array using array_name</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;site_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to array using site_id</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">mdy</span>(start_date)), <span class="co"># acquire year from deployment date</span></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a>         <span class="at">array_year =</span> <span class="fu">paste0</span>(array_name, <span class="st">&quot;_&quot;</span>, year)) <span class="sc">%&gt;%</span> <span class="co"># create new variable with array name and year</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>  <span class="fu">group_by</span>(array_year) <span class="sc">%&gt;%</span> </span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a>  tally <span class="sc">%&gt;%</span>  <span class="co"># calculate number of cameras per array per year</span></span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">8</span>) <span class="sc">%&gt;%</span> <span class="co"># include arrays with more than 8 cameras</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a>  tally <span class="co"># calculate number of arrays with &gt; 8 cameras deployed in a survey period</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a></span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a>n_array</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##       n
##   &lt;int&gt;
## 1    25</code></pre>
<p>We can see that 25 camera array deployments had more than eight cameras.</p>
</div>
<div id="sites-reused" class="section level3 hasAnchor" number="3.2.3">
<h3 class="hasAnchor"><span class="header-section-number">3.2.3</span> Sites reused<a href="#sites-reused" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many and which sites were reused.</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a>reused <span class="ot">&lt;-</span> site <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;site_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to site using site_id</span></span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>  <span class="fu">group_by</span>(site_id) <span class="sc">%&gt;%</span> <span class="co"># group by site</span></span>
<span id="cb40-4"><a href="#cb40-4" tabindex="-1"></a>  tally <span class="sc">%&gt;%</span> <span class="co"># calculate number of times each site is used</span></span>
<span id="cb40-5"><a href="#cb40-5" tabindex="-1"></a>  <span class="fu">filter</span>(n <span class="sc">&gt;</span> <span class="dv">1</span>) <span class="co"># include sites with more than one deployment</span></span>
<span id="cb40-6"><a href="#cb40-6" tabindex="-1"></a></span>
<span id="cb40-7"><a href="#cb40-7" tabindex="-1"></a>n_reused <span class="ot">&lt;-</span> <span class="fu">tally</span>(reused) <span class="co"># calculate number of sites reused</span></span>
<span id="cb40-8"><a href="#cb40-8" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" tabindex="-1"></a>reused</span></code></pre></div>
<pre><code>## # A tibble: 40 × 2
##    site_id                                           n
##    &lt;chr&gt;                                         &lt;int&gt;
##  1 DRPSS1                                            3
##  2 DSPSS1                                            3
##  3 IRPSS1                                            5
##  4 JBPSS1                                            4
##  5 LTPSS1                                            3
##  6 LWPSS1                                            3
##  7 MGPSS1                                            4
##  8 NRPSS1                                            3
##  9 OR_Forest_Oregon_State_University_22_ORSNAP07     2
## 10 Oregon_Forest_Lesmeister_21_loc_01                4
## # ℹ 30 more rows</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a>n_reused</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##       n
##   &lt;int&gt;
## 1    40</code></pre>
<p>We can see that 40 sites were reused between 2019-2023 in Idaho,
Washington and Oregon.</p>
</div>
</div>
<div id="number-of-species" class="section level2 hasAnchor" number="3.3">
<h2 class="hasAnchor"><span class="header-section-number">3.3</span> Number of species<a href="#number-of-species" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now, let’s look at the species level.</p>
<div id="by-habitat" class="section level3 hasAnchor" number="3.3.1">
<h3 class="hasAnchor"><span class="header-section-number">3.3.1</span> By habitat<a href="#by-habitat" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many species were detected in each habitat type.
Similar to before, we will need to bring in a third
table—sequence—to relate the detection and deployment tables.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="co"># filter out NA values for species</span></span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>sp_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ]</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>n_sp_habitat <span class="ot">&lt;-</span> sp_detect[sp_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb44-7"><a href="#cb44-7" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to detection using deployment_id</span></span>
<span id="cb44-8"><a href="#cb44-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">genus_species =</span> <span class="fu">paste0</span>(genus, <span class="st">&quot; &quot;</span>, species)) <span class="sc">%&gt;%</span> <span class="co"># create new variable with genus and species</span></span>
<span id="cb44-9"><a href="#cb44-9" tabindex="-1"></a>  <span class="fu">select</span>(genus_species, habitat) <span class="sc">%&gt;%</span>  <span class="co"># select variables genus_species and habitat</span></span>
<span id="cb44-10"><a href="#cb44-10" tabindex="-1"></a>  <span class="fu">group_by</span>(habitat) <span class="sc">%&gt;%</span> <span class="co"># group by habitat</span></span>
<span id="cb44-11"><a href="#cb44-11" tabindex="-1"></a>  tally</span>
<span id="cb44-12"><a href="#cb44-12" tabindex="-1"></a></span>
<span id="cb44-13"><a href="#cb44-13" tabindex="-1"></a>n_sp_habitat</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   habitat           n
##   &lt;chr&gt;         &lt;int&gt;
## 1 Anthropogenic  3538
## 2 Forest        10467
## 3 Grassland       371</code></pre>
</div>
<div id="by-feature-type" class="section level3 hasAnchor" number="3.3.2">
<h3 class="hasAnchor"><span class="header-section-number">3.3.2</span> By feature type<a href="#by-feature-type" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many species were detected near each feature type.
Like the previous query, we will need the sequence table to relate the
detection and deployment tables.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="co"># filter out NA values for species</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>sp_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ]</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>n_sp_feature <span class="ot">&lt;-</span> sp_detect[sp_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to detection using deployment_id</span></span>
<span id="cb46-8"><a href="#cb46-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">genus_species =</span> <span class="fu">paste0</span>(genus, <span class="st">&quot; &quot;</span>, species)) <span class="sc">%&gt;%</span> <span class="co"># create new variable with genus and species</span></span>
<span id="cb46-9"><a href="#cb46-9" tabindex="-1"></a>  <span class="fu">select</span>(genus_species, feature_type) <span class="sc">%&gt;%</span>  <span class="co"># select variables genus_species and feature_type</span></span>
<span id="cb46-10"><a href="#cb46-10" tabindex="-1"></a>  <span class="fu">group_by</span>(feature_type) <span class="sc">%&gt;%</span> <span class="co"># group by feature_type</span></span>
<span id="cb46-11"><a href="#cb46-11" tabindex="-1"></a>  tally</span>
<span id="cb46-12"><a href="#cb46-12" tabindex="-1"></a></span>
<span id="cb46-13"><a href="#cb46-13" tabindex="-1"></a>n_sp_feature</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##   feature_type     n
##   &lt;chr&gt;        &lt;int&gt;
## 1 None         11219
## 2 Other          763
## 3 Road dirt      297
## 4 Trail game    1239
## 5 Trail hiking   730
## 6 Water source   128</code></pre>
</div>
<div id="by-habitat-and-feature-type" class="section level3 hasAnchor" number="3.3.3">
<h3 class="hasAnchor"><span class="header-section-number">3.3.3</span> By habitat and feature type<a href="#by-habitat-and-feature-type" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many species were detected in each habitat type near
each feature type.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="co"># filter out NA values for species</span></span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>sp_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ]</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>n_species <span class="ot">&lt;-</span> sp_detect[sp_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb48-6"><a href="#cb48-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb48-7"><a href="#cb48-7" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to detection using deployment_id</span></span>
<span id="cb48-8"><a href="#cb48-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">genus_species =</span> <span class="fu">paste0</span>(genus, <span class="st">&quot; &quot;</span>, species)) <span class="sc">%&gt;%</span> <span class="co"># create new variable with genus and species</span></span>
<span id="cb48-9"><a href="#cb48-9" tabindex="-1"></a>  <span class="fu">select</span>(genus_species, habitat, feature_type) <span class="sc">%&gt;%</span>  <span class="co"># select variables genus_species, habitat, and feature_type</span></span>
<span id="cb48-10"><a href="#cb48-10" tabindex="-1"></a>  <span class="fu">group_by</span>(habitat, feature_type) <span class="sc">%&gt;%</span> <span class="co"># group by habitat, then feature_type</span></span>
<span id="cb48-11"><a href="#cb48-11" tabindex="-1"></a>  tally</span>
<span id="cb48-12"><a href="#cb48-12" tabindex="-1"></a></span>
<span id="cb48-13"><a href="#cb48-13" tabindex="-1"></a>n_species</span></code></pre></div>
<pre><code>## # A tibble: 11 × 3
## # Groups:   habitat [3]
##    habitat       feature_type     n
##    &lt;chr&gt;         &lt;chr&gt;        &lt;int&gt;
##  1 Anthropogenic None          2979
##  2 Anthropogenic Trail game     257
##  3 Anthropogenic Trail hiking   302
##  4 Forest        None          8240
##  5 Forest        Other          736
##  6 Forest        Road dirt      297
##  7 Forest        Trail game     766
##  8 Forest        Trail hiking   428
##  9 Grassland     Other           27
## 10 Grassland     Trail game     216
## 11 Grassland     Water source   128</code></pre>
</div>
</div>
<div id="number-of-detections" class="section level2 hasAnchor" number="3.4">
<h2 class="hasAnchor"><span class="header-section-number">3.4</span> Number of detections<a href="#number-of-detections" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s look at the individual level for wildlife detections.</p>
<div id="by-year" class="section level3 hasAnchor" number="3.4.1">
<h3 class="hasAnchor"><span class="header-section-number">3.4.1</span> By year<a href="#by-year" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many individuals—known and unknown—were detected
each year.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a>wlf_detect <span class="ot">&lt;-</span> detection</span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a>wlf_detect<span class="sc">$</span>species[<span class="fu">is.na</span>(wlf_detect<span class="sc">$</span>species)] <span class="ot">&lt;-</span> <span class="st">&quot;unknown&quot;</span> <span class="co"># convert NA values to &quot;unknown&quot;</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a>n_detect_yr <span class="ot">&lt;-</span> wlf_detect[wlf_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">mdy_hm</span>(start_time))) <span class="sc">%&gt;%</span> <span class="co"># acquire year from start sequence</span></span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a>  <span class="fu">select</span>(group_number, year) <span class="sc">%&gt;%</span>  <span class="co"># select variables group_number and year</span></span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="co"># group by year</span></span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number))</span>
<span id="cb50-11"><a href="#cb50-11" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" tabindex="-1"></a>n_detect_yr</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##    year     n
##   &lt;dbl&gt; &lt;int&gt;
## 1  2019  4425
## 2  2020  3780
## 3  2021  1816
## 4  2022  4696
## 5  2023  4699</code></pre>
<p>We want to know how many known individuals were detected each year.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ] <span class="co"># filter out unknown (NA) detections</span></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a></span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a>n_known_yr <span class="ot">&lt;-</span> known_detect[known_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">year</span>(<span class="fu">mdy_hm</span>(start_time))) <span class="sc">%&gt;%</span> <span class="co"># acquire year from start sequence</span></span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a>  <span class="fu">select</span>(group_number, year) <span class="sc">%&gt;%</span>  <span class="co"># select variables group_number and year</span></span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> <span class="co"># group by year</span></span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number))</span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a></span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a>n_known_yr</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##    year     n
##   &lt;dbl&gt; &lt;int&gt;
## 1  2019  3432
## 2  2020  2886
## 3  2021  1618
## 4  2022  3917
## 5  2023  3841</code></pre>
</div>
<div id="by-month" class="section level3 hasAnchor" number="3.4.2">
<h3 class="hasAnchor"><span class="header-section-number">3.4.2</span> By month<a href="#by-month" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know how many individuals—known and unknown—were detected
each month to assess at a more seasonal level.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a>wlf_detect <span class="ot">&lt;-</span> detection</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a>wlf_detect<span class="sc">$</span>species[<span class="fu">is.na</span>(wlf_detect<span class="sc">$</span>species)] <span class="ot">&lt;-</span> <span class="st">&quot;unknown&quot;</span> <span class="co"># convert NA values to &quot;unknown&quot;</span></span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a>n_detect_m <span class="ot">&lt;-</span> wlf_detect[wlf_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(<span class="fu">mdy_hm</span>(start_time))) <span class="sc">%&gt;%</span> <span class="co"># acquire month from start sequence</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a>  <span class="fu">select</span>(group_number, month) <span class="sc">%&gt;%</span>  <span class="co"># select variables group_number and year</span></span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="co"># group by year</span></span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number))</span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a></span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a>n_detect_m</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   month     n
##   &lt;dbl&gt; &lt;int&gt;
## 1     8   761
## 2     9  8884
## 3    10  8862
## 4    11   909</code></pre>
<p>We want to know how many known individuals were detected each year.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ] <span class="co"># filter out unknown (NA) detections</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a></span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>n_known_m <span class="ot">&lt;-</span> known_detect[known_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(<span class="fu">mdy_hm</span>(start_time))) <span class="sc">%&gt;%</span> <span class="co"># acquire month from start sequence</span></span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a>  <span class="fu">select</span>(group_number, month) <span class="sc">%&gt;%</span>  <span class="co"># select variables group_number and month</span></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a>  <span class="fu">group_by</span>(month) <span class="sc">%&gt;%</span> <span class="co"># group by month</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number))</span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a>n_known_m</span></code></pre></div>
<pre><code>## # A tibble: 4 × 2
##   month     n
##   &lt;dbl&gt; &lt;int&gt;
## 1     8   672
## 2     9  7343
## 3    10  6943
## 4    11   736</code></pre>
</div>
<div id="by-site" class="section level3 hasAnchor" number="3.4.3">
<h3 class="hasAnchor"><span class="header-section-number">3.4.3</span> By site<a href="#by-site" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know which sites had the highest number of known individuals
detected. Let’s focus on the top five sites. Note that we need to bring
in the deployment and sequence tables to relate the site and detection
tables.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ] <span class="co"># filter out unknown (NA) detections</span></span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a></span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> known_detect[known_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="co"># filter out human detections</span></span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a></span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a>n_detect_site <span class="ot">&lt;-</span> site <span class="sc">%&gt;%</span> </span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;site_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to site using site_id</span></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to site using deployment_id</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a>  <span class="fu">left_join</span>(known_detect, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># join detection table to site using sequence_id</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>  <span class="fu">select</span>(group_number, site_id) <span class="sc">%&gt;%</span>  <span class="co"># select variables group_number and month</span></span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a>  <span class="fu">group_by</span>(site_id) <span class="sc">%&gt;%</span> <span class="co"># group by month</span></span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> <span class="co"># calculate number of individuals detected per site</span></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="co"># arrange in descending order of individuals detected</span></span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a></span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a><span class="fu">head</span>(n_detect_site, <span class="dv">5</span>) <span class="co"># display the 5 sites with highest number of detections</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   site_id     n
##   &lt;chr&gt;   &lt;int&gt;
## 1 IRPSS1    725
## 2 JBPSS1    531
## 3 LTPSS1    511
## 4 RVPSS1    394
## 5 DSPSS1    342</code></pre>
</div>
<div id="by-site-and-month" class="section level3 hasAnchor" number="3.4.4">
<h3 class="hasAnchor"><span class="header-section-number">3.4.4</span> By site and month<a href="#by-site-and-month" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to know which sites had the highest number of known individuals
detected in September and October. Again, let’s focus on the top five
sites. We need to bring in the deployment table to relate the
detection-sequence and site tables.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ] <span class="co"># filter out unknown (NA) detections</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a>known_detect <span class="ot">&lt;-</span> known_detect[known_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="co"># filter out human detections</span></span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a></span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a>n_detect <span class="ot">&lt;-</span> site <span class="sc">%&gt;%</span> </span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;site_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to site table using site_id</span></span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to site using deployment_id</span></span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a>  <span class="fu">left_join</span>(known_detect, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span>  <span class="co"># join detection table to site using sequence_id</span></span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(<span class="fu">mdy_hm</span>(start_time))) <span class="sc">%&gt;%</span> <span class="co"># acquire month from start sequence</span></span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>)) <span class="sc">%&gt;%</span> <span class="co"># only include detections from Sept and Oct</span></span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a>  <span class="fu">select</span>(group_number, month, site_id) <span class="sc">%&gt;%</span> <span class="co"># select variables group_number, month, and site_id</span></span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a>  <span class="fu">group_by</span>(site_id, month) <span class="sc">%&gt;%</span> <span class="co"># group by site_id, then by month</span></span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">sum</span>(group_number, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co"># calculate number of individuals detected per site per month</span></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a></span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a>Sept <span class="ot">&lt;-</span> n_detect[n_detect<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">9</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="co"># arrange in descending order of individuals detected</span></span>
<span id="cb60-18"><a href="#cb60-18" tabindex="-1"></a>Oct <span class="ot">&lt;-</span> n_detect[n_detect<span class="sc">$</span>month <span class="sc">==</span> <span class="dv">10</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb60-19"><a href="#cb60-19" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="co"># arrange in descending order of individuals detected</span></span>
<span id="cb60-20"><a href="#cb60-20" tabindex="-1"></a></span>
<span id="cb60-21"><a href="#cb60-21" tabindex="-1"></a><span class="fu">head</span>(Sept, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
## # Groups:   site_id [5]
##   site_id month     n
##   &lt;chr&gt;   &lt;dbl&gt; &lt;int&gt;
## 1 JBPSS1      9   355
## 2 IRPSS1      9   310
## 3 LTPSS1      9   298
## 4 DSPSS1      9   204
## 5 RVPSS1      9   190</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="fu">head</span>(Oct, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
## # Groups:   site_id [5]
##   site_id                 month     n
##   &lt;chr&gt;                   &lt;dbl&gt; &lt;int&gt;
## 1 IRPSS1                     10   368
## 2 LTPSS1                     10   213
## 3 SEWA_N01_LTPSS_SP20_OFF    10   203
## 4 RVPSS1                     10   195
## 5 JBPSS1                     10   168</code></pre>
<!--chapter:end:02-data_exploration.Rmd-->
</div>
</div>
</div>
<div id="data-visualization" class="section level1 hasAnchor" number="4">
<h1 class="hasAnchor"><span class="header-section-number">4</span> Data visualization<a href="#data-visualization" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Begin visualizing trends seen in the camera trap data. First, connect to the database and load the tables and packages from before. We will also be using <code>ggplot2</code>.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="fu">library</span>(DBI)</span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a><span class="fu">library</span>(RSQLite)</span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a>wlf_cam_db <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(<span class="at">drv =</span> RSQLite<span class="sc">::</span><span class="fu">SQLite</span>(),</span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a>                       <span class="st">&quot;../../database/wlf_cam.db&quot;</span>)</span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a></span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a>project <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM project_name;&quot;</span>)</span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a>array <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM camera_array;&quot;</span>)</span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>site <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM site_name;&quot;</span>)</span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a>deployment <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM deployment;&quot;</span>)</span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>sequence <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM sequence;&quot;</span>)</span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a>detection <span class="ot">&lt;-</span> <span class="fu">dbGetQuery</span>(wlf_cam_db, <span class="st">&quot;SELECT * FROM detection;&quot;</span>)</span></code></pre></div>
<p>To use the same color scheme shown, run <code>devtools::install_github("cdanielcadena/tanagR")</code> and load the package <code>tanagR</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a><span class="fu">library</span>(tanagR)</span></code></pre></div>
<div id="species-in-september-and-october" class="section level2 hasAnchor" number="4.1">
<h2 class="hasAnchor"><span class="header-section-number">4.1</span> Species in September and October<a href="#species-in-september-and-october" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We want to know the number of individuals in each species detected in September and October. There are many species observed throughout these data, so we will break down the detections as we go.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="co"># filter out NA values for species</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a>sp_detect <span class="ot">&lt;-</span> detection[<span class="sc">!</span><span class="fu">is.na</span>(detection<span class="sc">$</span>species), ]</span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a>sp_month <span class="ot">&lt;-</span> sp_detect[sp_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">genus_species =</span> <span class="fu">paste0</span>(genus, <span class="st">&quot; &quot;</span>, species), <span class="co"># create new variable with genus and species</span></span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a>         <span class="at">month =</span> <span class="fu">month</span>(<span class="fu">mdy_hm</span>(start_time), <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span> <span class="co"># acquire month from start sequence</span></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;September&quot;</span>, <span class="st">&quot;October&quot;</span>)) <span class="sc">%&gt;%</span> <span class="co"># only include detections from Sept and Oct</span></span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a>  <span class="fu">group_by</span>(month, common_name) <span class="sc">%&gt;%</span> <span class="co"># group by month, then common_name</span></span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a>  <span class="fu">select</span>(order, family, genus_species, group_number, common_name, month) <span class="co"># select variables genus_species, group_number, and habitat</span></span></code></pre></div>
<div id="species-detected-100-times" class="section level3 hasAnchor" number="4.1.1">
<h3 class="hasAnchor"><span class="header-section-number">4.1.1</span> Species detected &gt; 100 times<a href="#species-detected-100-times" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s visualize this for species with more than 100 detections in September or October.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a>mult_detect <span class="ot">&lt;-</span> sp_month <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>  <span class="fu">group_by</span>(month, common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number)) <span class="sc">%&gt;%</span> <span class="co"># calculate number of individuals detected per species per month</span></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>  <span class="fu">filter</span>(n_individuals <span class="sc">&gt;</span> <span class="dv">100</span>) <span class="co"># select species detected &gt; 100 times</span></span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a></span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a><span class="fu">ggplot</span>(mult_detect, <span class="fu">aes</span>(<span class="at">x =</span> common_name, <span class="at">y =</span> n_individuals, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Species detected&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Month&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a>  <span class="fu">scale_fill_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;cyanerpes_cyaneus&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/vis_100_detect_months-1.png" width="672" /></p>
</div>
<div id="carnivora-order-detections" class="section level3 hasAnchor" number="4.1.2">
<h3 class="hasAnchor"><span class="header-section-number">4.1.2</span> Carnivora order detections<a href="#carnivora-order-detections" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Focusing on the order Carnivora, we want to visualize the number of individuals in each species detected in September and October.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>carnivora <span class="ot">&lt;-</span> sp_month[sp_month<span class="sc">$</span>order <span class="sc">==</span> <span class="st">&quot;Carnivora&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># select species in order Carnivora</span></span>
<span id="cb68-2"><a href="#cb68-2" tabindex="-1"></a>  <span class="fu">group_by</span>(month, common_name) <span class="sc">%&gt;%</span> </span>
<span id="cb68-3"><a href="#cb68-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number)) <span class="co"># calculate number of individuals detected per species per month</span></span>
<span id="cb68-4"><a href="#cb68-4" tabindex="-1"></a></span>
<span id="cb68-5"><a href="#cb68-5" tabindex="-1"></a><span class="fu">ggplot</span>(carnivora, <span class="fu">aes</span>(<span class="at">x =</span> common_name, <span class="at">y =</span> n_individuals, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb68-6"><a href="#cb68-6" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-7"><a href="#cb68-7" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Species detected&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Month&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-8"><a href="#cb68-8" tabindex="-1"></a>  <span class="fu">scale_fill_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;ramphocelus_sanguinolentus&quot;</span>) <span class="sc">+</span></span>
<span id="cb68-9"><a href="#cb68-9" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb68-10"><a href="#cb68-10" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/vis_carnivora_months-1.png" width="672" /></p>
</div>
</div>
<div id="detections-across-orders" class="section level2 hasAnchor" number="4.2">
<h2 class="hasAnchor"><span class="header-section-number">4.2</span> Detections across orders<a href="#detections-across-orders" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many detections were only identified to the order level. Rather than looking at the species level, we want to visualize the number of individuals in each order detected in September and October.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>wlf_detect <span class="ot">&lt;-</span> detection</span>
<span id="cb69-2"><a href="#cb69-2" tabindex="-1"></a>wlf_detect<span class="sc">$</span>species[<span class="fu">is.na</span>(wlf_detect<span class="sc">$</span>species)] <span class="ot">&lt;-</span> <span class="st">&quot;unknown&quot;</span> <span class="co"># convert NA values to &quot;unknown&quot;</span></span>
<span id="cb69-3"><a href="#cb69-3" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" tabindex="-1"></a>n_order <span class="ot">&lt;-</span> wlf_detect[wlf_detect<span class="sc">$</span>species <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>, ] <span class="sc">%&gt;%</span> <span class="co"># filter out detections of humans</span></span>
<span id="cb69-5"><a href="#cb69-5" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, common_name)) <span class="sc">%&gt;%</span> <span class="co"># filter out domestic animals</span></span>
<span id="cb69-6"><a href="#cb69-6" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb69-7"><a href="#cb69-7" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">month</span>(<span class="fu">mdy_hm</span>(start_time), </span>
<span id="cb69-8"><a href="#cb69-8" tabindex="-1"></a>                       <span class="at">label =</span> <span class="cn">TRUE</span>, <span class="at">abbr =</span> <span class="cn">FALSE</span>)) <span class="sc">%&gt;%</span> <span class="co"># acquire month from start sequence</span></span>
<span id="cb69-9"><a href="#cb69-9" tabindex="-1"></a>  <span class="fu">filter</span>(month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;September&quot;</span>, <span class="st">&quot;October&quot;</span>), <span class="co"># only include detections from Sept and Oct</span></span>
<span id="cb69-10"><a href="#cb69-10" tabindex="-1"></a>         <span class="sc">!</span><span class="fu">is.na</span>(order)) <span class="sc">%&gt;%</span> <span class="co"># remove NAs</span></span>
<span id="cb69-11"><a href="#cb69-11" tabindex="-1"></a>  <span class="fu">group_by</span>(month, order) <span class="sc">%&gt;%</span> <span class="co"># group by month, then order </span></span>
<span id="cb69-12"><a href="#cb69-12" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number))  <span class="co"># calculate number of individuals detected per order per month</span></span>
<span id="cb69-13"><a href="#cb69-13" tabindex="-1"></a></span>
<span id="cb69-14"><a href="#cb69-14" tabindex="-1"></a><span class="fu">ggplot</span>(n_order, <span class="fu">aes</span>(<span class="at">x =</span> order, <span class="at">y =</span> n_individuals, <span class="at">fill =</span> month)) <span class="sc">+</span></span>
<span id="cb69-15"><a href="#cb69-15" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-16"><a href="#cb69-16" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Order detected&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Month&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-17"><a href="#cb69-17" tabindex="-1"></a>  <span class="fu">scale_fill_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;tangara_chilensis&quot;</span>) <span class="sc">+</span></span>
<span id="cb69-18"><a href="#cb69-18" tabindex="-1"></a>  <span class="fu">theme_classic</span>() <span class="sc">+</span></span>
<span id="cb69-19"><a href="#cb69-19" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/vis_order_months-1.png" width="672" /></p>
</div>
<div id="detections-over-time" class="section level2 hasAnchor" number="4.3">
<h2 class="hasAnchor"><span class="header-section-number">4.3</span> Detections over time<a href="#detections-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We want to visualize wildlife trends over time in a couple of ways. Let’s break this down again to help understand the bigger picture.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>detect_wlf <span class="ot">&lt;-</span> detection</span>
<span id="cb70-2"><a href="#cb70-2" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[<span class="sc">!</span><span class="fu">grepl</span>(<span class="st">&quot;Domestic&quot;</span>, detect_wlf<span class="sc">$</span>common_name)] <span class="ot">&lt;-</span> <span class="st">&quot;wildlife&quot;</span></span>
<span id="cb70-3"><a href="#cb70-3" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">!=</span> <span class="st">&quot;sapiens&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;wildlife&quot;</span> </span>
<span id="cb70-4"><a href="#cb70-4" tabindex="-1"></a>  <span class="co"># define non-human and non-domestic life as wildlife in new column &#39;term&#39;</span></span>
<span id="cb70-5"><a href="#cb70-5" tabindex="-1"></a></span>
<span id="cb70-6"><a href="#cb70-6" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>species <span class="sc">==</span> <span class="st">&quot;sapiens&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span> </span>
<span id="cb70-7"><a href="#cb70-7" tabindex="-1"></a>  <span class="co"># define humans as human or domestic life</span></span>
<span id="cb70-8"><a href="#cb70-8" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">==</span> <span class="st">&quot;Domestic Cat&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span> </span>
<span id="cb70-9"><a href="#cb70-9" tabindex="-1"></a>  <span class="co"># define domestic cats as human or domestic life</span></span>
<span id="cb70-10"><a href="#cb70-10" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">==</span> <span class="st">&quot;Domestic Cattle&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span></span>
<span id="cb70-11"><a href="#cb70-11" tabindex="-1"></a>  <span class="co"># define domestic cattle as human or domestic life</span></span>
<span id="cb70-12"><a href="#cb70-12" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">==</span> <span class="st">&quot;Domestic Dog&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span> </span>
<span id="cb70-13"><a href="#cb70-13" tabindex="-1"></a>  <span class="co"># define domestic dogs as human or domestic life</span></span>
<span id="cb70-14"><a href="#cb70-14" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">==</span> <span class="st">&quot;Domestic Horse&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span> </span>
<span id="cb70-15"><a href="#cb70-15" tabindex="-1"></a>  <span class="co"># define domestic horses as human or domestic life</span></span>
<span id="cb70-16"><a href="#cb70-16" tabindex="-1"></a>detect_wlf<span class="sc">$</span>term[detect_wlf<span class="sc">$</span>common_name <span class="sc">==</span> <span class="st">&quot;Domestic Sheep&quot;</span>] <span class="ot">&lt;-</span> <span class="st">&quot;human-domestic&quot;</span> </span>
<span id="cb70-17"><a href="#cb70-17" tabindex="-1"></a>  <span class="co"># define domestic sheep as human or domestic life</span></span>
<span id="cb70-18"><a href="#cb70-18" tabindex="-1"></a></span>
<span id="cb70-19"><a href="#cb70-19" tabindex="-1"></a>detect_wlf <span class="ot">&lt;-</span> detect_wlf[<span class="sc">!</span><span class="fu">is.na</span>(detect_wlf<span class="sc">$</span>common_name), ] </span>
<span id="cb70-20"><a href="#cb70-20" tabindex="-1"></a>  <span class="co"># remove wildlife undefined in the common_name</span></span>
<span id="cb70-21"><a href="#cb70-21" tabindex="-1"></a></span>
<span id="cb70-22"><a href="#cb70-22" tabindex="-1"></a>sp_time <span class="ot">&lt;-</span> detect_wlf <span class="sc">%&gt;%</span> </span>
<span id="cb70-23"><a href="#cb70-23" tabindex="-1"></a>  <span class="fu">left_join</span>(sequence, <span class="at">by =</span> <span class="st">&quot;sequence_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join sequence table to detection using sequence_id</span></span>
<span id="cb70-24"><a href="#cb70-24" tabindex="-1"></a>  <span class="fu">left_join</span>(deployment, <span class="at">by =</span> <span class="st">&quot;deployment_id&quot;</span>) <span class="sc">%&gt;%</span> <span class="co"># join deployment table to detection using deployment_id</span></span>
<span id="cb70-25"><a href="#cb70-25" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">mdy</span>(<span class="fu">format</span>(<span class="fu">mdy_hm</span>(start_time), <span class="st">&quot;%m-%d-%Y&quot;</span>)), <span class="co"># acquire date from start sequence</span></span>
<span id="cb70-26"><a href="#cb70-26" tabindex="-1"></a>         <span class="at">year =</span> <span class="fu">year</span>(<span class="fu">mdy_hm</span>(start_time)), <span class="co"># acquire year from start sequence</span></span>
<span id="cb70-27"><a href="#cb70-27" tabindex="-1"></a>         <span class="at">julian_day =</span> date) <span class="co"># begin building julian day</span></span>
<span id="cb70-28"><a href="#cb70-28" tabindex="-1"></a></span>
<span id="cb70-29"><a href="#cb70-29" tabindex="-1"></a><span class="fu">year</span>(sp_time<span class="sc">$</span>julian_day) <span class="ot">&lt;-</span> <span class="dv">2000</span> <span class="co"># set year to be the same for all julian days</span></span></code></pre></div>
<div id="wildlife-detections-over-time" class="section level3 hasAnchor" number="4.3.1">
<h3 class="hasAnchor"><span class="header-section-number">4.3.1</span> Wildlife detections over time<a href="#wildlife-detections-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to visualize the number of individuals detected over time and compare across years.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>wlf_time <span class="ot">&lt;-</span> sp_time[sp_time<span class="sc">$</span>term <span class="sc">!=</span> <span class="st">&quot;human-domestic&quot;</span>, ] <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, julian_day) <span class="sc">%&gt;%</span> <span class="co"># group by year, then julian day</span></span>
<span id="cb71-3"><a href="#cb71-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number)) <span class="co"># calculate number of individuals detected daily per year</span></span>
<span id="cb71-4"><a href="#cb71-4" tabindex="-1"></a></span>
<span id="cb71-5"><a href="#cb71-5" tabindex="-1"></a><span class="fu">ggplot</span>(wlf_time, <span class="fu">aes</span>(<span class="at">x =</span> julian_day, </span>
<span id="cb71-6"><a href="#cb71-6" tabindex="-1"></a>                     <span class="at">y =</span> n_individuals, </span>
<span id="cb71-7"><a href="#cb71-7" tabindex="-1"></a>                     <span class="at">color =</span> <span class="fu">as.factor</span>(year))) <span class="sc">+</span></span>
<span id="cb71-8"><a href="#cb71-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb71-9"><a href="#cb71-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Time&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals detected&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Year&quot;</span>) <span class="sc">+</span></span>
<span id="cb71-10"><a href="#cb71-10" tabindex="-1"></a>  <span class="fu">scale_color_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;tangara_chilensis&quot;</span>) <span class="sc">+</span></span>
<span id="cb71-11"><a href="#cb71-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/wlf_time-1.png" width="672" /></p>
</div>
<div id="wildlife-and-human-domestic-detections-over-time" class="section level3 hasAnchor" number="4.3.2">
<h3 class="hasAnchor"><span class="header-section-number">4.3.2</span> Wildlife and human-domestic detections over time<a href="#wildlife-and-human-domestic-detections-over-time" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We want to visualize the number of individuals detected over time, along with the number of humans and domestic animals. We will first look at the year level.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>wlf_human_time <span class="ot">&lt;-</span> sp_time<span class="sc">%&gt;%</span> </span>
<span id="cb72-2"><a href="#cb72-2" tabindex="-1"></a>  <span class="fu">group_by</span>(date, term) <span class="sc">%&gt;%</span> <span class="co"># group by date</span></span>
<span id="cb72-3"><a href="#cb72-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number)) <span class="co"># calculate number of individuals detected daily across years</span></span>
<span id="cb72-4"><a href="#cb72-4" tabindex="-1"></a></span>
<span id="cb72-5"><a href="#cb72-5" tabindex="-1"></a><span class="fu">ggplot</span>(wlf_human_time, <span class="fu">aes</span>(<span class="at">x =</span> date, </span>
<span id="cb72-6"><a href="#cb72-6" tabindex="-1"></a>                     <span class="at">y =</span> n_individuals, </span>
<span id="cb72-7"><a href="#cb72-7" tabindex="-1"></a>                     <span class="at">color =</span> term)) <span class="sc">+</span></span>
<span id="cb72-8"><a href="#cb72-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb72-9"><a href="#cb72-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Time&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals detected&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Detection type&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-10"><a href="#cb72-10" tabindex="-1"></a>  <span class="fu">scale_color_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;tangara_chilensis&quot;</span>) <span class="sc">+</span></span>
<span id="cb72-11"><a href="#cb72-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/wlf_human_time-1.png" width="672" /></p>
<p>Now, let’s look at a monthly level.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a>wlf_human_julian <span class="ot">&lt;-</span> sp_time<span class="sc">%&gt;%</span> </span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a>  <span class="fu">group_by</span>(year, julian_day, term) <span class="sc">%&gt;%</span> <span class="co"># group by year, then julian day, then term</span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">n_individuals =</span> <span class="fu">sum</span>(group_number)) <span class="co"># calculate number of individuals detected daily per year</span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a><span class="fu">ggplot</span>(wlf_human_julian, <span class="fu">aes</span>(<span class="at">x =</span> julian_day, </span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a>                     <span class="at">y =</span> n_individuals, </span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a>                     <span class="at">color =</span> term)) <span class="sc">+</span></span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Time&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Number of individuals detected&quot;</span>, <span class="at">color =</span> <span class="st">&quot;Detection type&quot;</span>) <span class="sc">+</span></span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a>  <span class="fu">scale_color_tanagr</span>(<span class="at">palette_name =</span> <span class="st">&quot;tangara_chilensis&quot;</span>) <span class="sc">+</span></span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a>  <span class="fu">theme_classic</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/wlf_human_julian-1.png" width="672" /></p>
<p>Surprisingly, wildlife detections do not appear to decrease as human and domestic animal detections increase.</p>
<!--chapter:end:03-data_visualization.Rmd-->
</div>
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

</body>

</html>
